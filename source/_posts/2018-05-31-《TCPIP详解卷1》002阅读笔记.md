---
title: '「TCP/IP详解 卷1」002 阅读笔记'
date: 2018-05-31 11:45:10
tags: [计算机网络,TCP,IP,看不懂]
categories: 《TCP/IP详解 卷1》
---

# 名词解释

- LLC：逻辑链路控制（Logic Link Control）

- SNAPL：自网络访问协议（SubNetwork Access Protocol）

- IEEE：电子电气工程师协会

- CRC：循环冗余校验（Cyclic Redundancy Check ）

- pad字节：padding byte，填充字节

- RS-232：异步传输标准接口

- BSD：Berkeley Software Distribution，Unix 的衍生系统

# 链路层主要三个目的

1. 为 IP 模块发送接受 IP 数据报。

2. 为 ARP 模块发送 ARP 请求和接受 ARP 应答。

3. 为 RARP 发送 RARP 请求和接受 RARP 应答。

# 以太网与 IEEE 802 封装对比

|   | 以太网 | IEEE 802 | 备注 |
| - |------ | -------- | - |
| 数据报封装 | RFC 894 中定义 | RFC 1042 中定义 ||
| 长度字段 |  | 后续数据的长度字段（不包括 CRC） ||
| 类型字段 | 后续数据的类型 | 由后续子网接入协议的首部给出 | 格式相同 |
| 最小长度 | 46 字节 | 38 字节 | 不足空间填充 pad 字节 |

有效类型值都不相同，可以对两种帧格式进行区分。

以太网：类型字段后是数据。

IEEE 802：长度字段后是 802.2LLC、802.2SNAP。

CRC 字段（FCS/帧校验序列）：后续字节差错的循环冗余码校验。

# 尾部封装
- 在 RFC 89C 被描述。

- 通过调整 IP 数据报中字段次序提高性能。

- 将 IP 首部和 TCP 首部移到尾部 CRC 之前。

- ==**当把数据复制到内核是，可以绑数据帧中的数据部分映射到一个硬件页面，节省到内存的复制过程。**看不懂？？？==

- **尾部封装已遭到反对。**

# SLIP：串行线路 IP

- 串行线路上对 IP 数据报封装的简单形式。

- 适用于 RS-232 串行端口、高速调制解调器接入网络。

- 以 END(0XC0) 的特殊字符结束。

- 如果有线路噪声，开始也传一个 END(0XC0) 字符。

- IP 报文中 END 用 0XDB 和 0XDC 取代（称为 ESC 字符）。

- IP 报文中 ESC 用 0XDB 和 0XDD 取代。

- 缺陷：

    1. 每一端必须知道对方的IP地址。

    2. 没有类型字段，不能和其他协议同时使用。

    3. 没有校验和。

# 压缩的 SLIP（CSLIP）

- 在 RFC 1144 中被描述。

- 为了在 SLIP 上传输 1 个字节总共需要 40 字节，CSLIP 能把它们压缩到 3 或 5 个字节。

- 每一端维持多达 16 个 TCP 连接。

- 知道每个连接的首部哪些字段一般不会发生变化。

- 被压缩的首部大大缩短了交互响应时间。

# PPP 点对点协议

**修改了 SLIP 协议中的所有缺陷，最终应该取代 SLIP。**

## PPP 包括三个部分：

1. 在串行链路上封装 IP 数据报的方法。

2. 建立、配置及测试数据链路的链路控制协议。

3. 针对不同网络层协议的网络控制协议体系。

## 数据报帧的格式：

- 以 0X7E 开始和结束。

- 地址字节值始终为 0XFF。

- 协议字段（类似以太网类型字段）：

| 协议字段的值 | 标识信息字段的类型 |
| ---------- | ----------------|
| 0X0021 | IP数据报 |
| 0XC021 | 链路控制数据 |
| 0X8021 | 网络控制数据 |

信息字段出现 0X7E 时需要转义。

利用链路控制协议，大多数可以省略标识符和地址字段。

使用 IP 网络控制协议，大多数可以采用 Van Jacobson 报文首部压缩方法。不懂？？？

对比 SLIP 具有的优点

1. PPP 支持在单根串行线路上运行多种协议。

2. 每一帧都有循环冗余校验。

3. 通信双方可以进行 IP 地址的动态协商。

4. 与 CSLIP 类似，对 TCP 和 IP 报文首部压缩。

5. 链路控制协议可以对多个数据链路选项进行设置。

# 环回接口（localhost）

- 大多数系统把 IP 地址 127.0.0.1 分配给这个接口。

- 一个传给环回接口的 IP 数据报不能在任何网络上出现。

# 最大传输单元 MTU

- 如果 IP 层有一个长度大于链路层的 MTU 的数据报要传，需要进行分片。

- MTU 不是物理特性，它是一个逻辑限制。

- 目的：为交互使用提供足够快的响应时间。

# 路径 MTU

==**两台主机路径中的最小 MTU 被称作路径 MTU（不一定是个常数）。**看不懂这句话==

# 串行线路吞吐量计算

> 如果线路速率是 9600b/s，而一个字节有 8bit，加上一个起始比特和一个停止比特，那么线路的速率就是 960B/s（字节/秒）。

- 这句话是指每个 bit 加一个起始一个停止，所有 9600 / (8 + 2) = 960 B/s。

- 如果把 SLIP 的 MTU 降到 256 以下，将降低传输大块数据的最大吞吐量。

- 平均等待时间的计算（传输大数据帧所需时间的一半）只适用于 SLIP 或 PPP 链路。

==为什么要等一半的时间？？==
